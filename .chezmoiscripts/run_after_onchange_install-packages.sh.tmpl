#!/bin/bash

# {{ if and (eq .chezmoi.os "darwin") (eq .chezmoi.hostname "daikimkw-pc-1") }}
eval "$(/opt/homebrew/bin/brew shellenv)"
# {{ else if eq .chezmoi.os "darwin" }}
eval "$({{ .chezmoi.homeDir }}/homebrew/bin/brew shellenv)"
# {{ else if eq .chezmoi.os "linux" }}
eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
# {{ end }}

# Brewfile hash: {{ include "dot_Brewfile.tmpl" | sha256sum }}

brew bundle --file="$HOME/.Brewfile"

if command -v cursor &>/dev/null; then
  grep '^vscode ' "$HOME/.Brewfile" | sed 's/vscode "\(.*\)"/\1/' | while read -r ext; do
    cursor --install-extension "$ext" --force || true
  done
fi
